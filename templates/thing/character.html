{% extends "base.html" %}
{% load thing_extras %}

{% block title %}EVEthing: Character: {{ char.name }}{% endblock %}

{% block content %}
      <div class="row">
        <div class="thumbnail span3">
          <img src="http://image.eveonline.com/Character/{{ char.eve_character_id }}_256.jpg">
        </div>
        <div class="span9">
          <h2>{{ char.name }}</h2>
          <div class="row">
            <div class="span4">
              <p>Wallet: {% if config.show_wallet %}{{ char.wallet_balance|commas }}{% else %}??{% endif %} ISK</p>
              <table>
                <tr class="r">
                  <td><strong>Int:</strong></td>
                  <td>{{ char.int_attribute }}</td>
                  <td>({% if config.show_implants %}+{{ char.int_bonus }}{% else %}??{% endif %})</td>
                </tr>
                <tr class="r">
                  <td><strong>Mem:</strong></td>
                  <td>{{ char.mem_attribute }}</td>
                  <td>({% if config.show_implants %}+{{ char.mem_bonus }}{% else %}??{% endif %})</td>
                </tr>
                <tr class="r">
                  <td><strong>Per:</strong></td>
                  <td>{{ char.per_attribute }}</td>
                  <td>({% if config.show_implants %}+{{ char.per_bonus }}{% else %}??{% endif %})</td>
                </tr>
                <tr class="r">
                  <td><strong>Wil:</strong></td>
                  <td>{{ char.wil_attribute }}</td>
                  <td>({% if config.show_implants %}+{{ char.wil_bonus }}{% else %}??{% endif %})</td>
                </tr>
                <tr class="r">
                  <td><strong>Cha:</strong></td>
                  <td>{{ char.cha_attribute }}</td>
                  <td>({% if config.show_implants %}+{{ char.cha_bonus }}{% else %}??{% endif %})</td>
                </tr>
              </table>
              <br>
            </div>
            <div class="span3">
              <ul class="unstyled">
                <li>Total SP: {{ char.get_total_skill_points|commas }}</li>
                {% if config.show_clone %}
                <li>Clone limit: {{ char.clone_skill_points|commas }}</li>
                <li>{{ char.clone_name }}</li>
                {% endif %}
              </ul>
            </div>
          </div>

          {% if config.show_skill_queue and queue %}
          <div class="row">
            <div class="span9">
              <div class="well well-small alert-success black">
                <h3>Skill Queue</h3>
                <div>
                  {{ queue.0.skill.item.name }} {{ queue.0.get_roman_level }} (Rank {{ queue.0.skill.rank }}) --
                  {{ queue.0.get_remaining|duration }} remaining
                  <div class="pull-right">{{ queue.0.end_time|date:"Y-m-d H:i:s" }} UTC</div>
                  <div style="width: 100%">
                    <div class="progress margin-half-top">
                      <div class="bar" style="width: {{ queue.0.get_complete_percentage }}%">{{ queue.0.get_complete_percentage }}%</div>
                    </div>
                  </div>
                </div>
                {% if queue_rest %}
                {% for sq in queue_rest %}
                {{ sq.skill.item.name }} {{ sq.get_roman_level }} (Rank {{ sq.skill.rank }})
                {% endfor %}
                {% endif %}
                </ul>
              </div>
            </div>
          </div>
          {% endif %}

          {% for mg, css in skills.items %}
          <div class="row">
            <div class="span9">
              <div class="well well-small">
                <h3>{{ mg.name }}</h3>
                {% for cs in css %}
                <div>
                  {% if cs.level == 5 %}<span class="level5">{% endif %}
                  {{ cs.skill.item.name }} {{ cs.get_roman_level }} (Rank {{ cs.skill.rank }}) / SP: {{ cs.points|commas }} of {{ cs.skill.get_sp_at_level|commas }}
                  {% if cs.level == 5 %}</span>{% endif %}
                  <div class="pull-right">
                    {% for level in skill_loop %}
                    <i class="{% if level <= cs.level %}icon-star{% else %}{% if cs.z_partial == level %}icon-star-empty{% else %}icon-minus{% endif %}{% endif %} nomargin"></i>
                    {% endfor %}
                  </div>
                </div>
                {% endfor %}
                <div class="margin-half-top">
                  <strong>{{ css|length }}</strong> skills trained for <strong>{{ mg.z_total_sp|commas }}</strong> SP</div>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>

{% endblock %}
